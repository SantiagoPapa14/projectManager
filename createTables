CREATE TABLE `Task`(
    `taskId` BIGINT UNSIGNED NOT NULL UNIQUE AUTO_INCREMENT PRIMARY KEY,
    `name` TEXT NOT NULL,
    `description` TEXT NULL,
    `parentTask` BIGINT NULL
);

CREATE TABLE `User`(
    `userId` BIGINT UNSIGNED NOT NULL UNIQUE AUTO_INCREMENT PRIMARY KEY,
    `username` VARCHAR(255) NOT NULL UNIQUE
);

CREATE TABLE `AssignedTasks`(
    `userId` BIGINT UNSIGNED NOT NULL,
    `taskId` BIGINT UNSIGNED NOT NULL,
    FOREIGN KEY (userId) REFERENCES User(userId),
    FOREIGN KEY (taskId) REFERENCES Task(taskId)
);

CREATE TABLE `Status`(
    `taskId` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `priority` BIGINT NOT NULL,
    `state` ENUM('Done', 'Pending', 'In Progress') NOT NULL,
    `deadline` DATE NOT NULL,
    FOREIGN KEY (taskId) REFERENCES Task(taskId)
);

ALTER TABLE
    `User` ADD UNIQUE `user_username_unique`(`username`);